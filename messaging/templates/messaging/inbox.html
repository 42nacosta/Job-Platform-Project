{% extends "base.html" %}
{% block content %}
<div class="container mt-4" style="max-width:900px;">
  <h1>Inbox</h1>

  <h5 class="mt-3">Application Conversations</h5>
  <ul>
    {% for conv in conversations %}
      {% with app=conv.application %}
        <li>
          <a href="{% url 'messaging:conversation_detail' app.id %}">
            {{ app.job.title }} â€” {{ app.applicant.username }}
          </a>
        </li>
      {% endwith %}
    {% empty %}
      <li class="text-muted">No application conversations.</li>
    {% endfor %}
  </ul>

  <h5 class="mt-4">Direct Messages</h5>
  <ul>
    {% for d in direct_conversations %}
      {% if d.user_one == request.user %}
        {% with other=d.user_two %}
          <li><a href="{% url 'messaging:direct_conversation' other.username %}">{{ other.username }}</a></li>
        {% endwith %}
      {% else %}
        {% with other=d.user_one %}
          <li><a href="{% url 'messaging:direct_conversation' other.username %}">{{ other.username }}</a></li>
        {% endwith %}
      {% endif %}
    {% empty %}
      <li class="text-muted">No direct messages yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
